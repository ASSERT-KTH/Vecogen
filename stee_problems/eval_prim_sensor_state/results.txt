[{'iteration': 0, 'prompt': 'You are an expert software engineer that is asked to implement a function for formally specified problems in the safety-critical domain. You are given a specification in the ACSL language and are asked to create the code in C will be formally verified using the tool Frama-C.\n-----END_ASSISTANT_INFORMATION-----\nYou must adhere to the following rules:\nUse the predicates defined in the specification\nDo not change the specification\nDo not add an explanation to the code\nDo not make use of loops\n\nYou are given the following specification and problem description. You must return the code in the following format:\n```C\n/*\n    This module controls the steering system of vehicles.\n\n    The following is a list of requirements it should adhere to.\n\n    Req. 1:\n    If the primary circuit has no flow\n    or a short circuit is detected\n    then the primary circuit cannot provide power steering.\n\n    Req. 2:\n    The vehicle is considered to be moving\n    if the wheel based speed signal is greater than 3 km/h.\n\n    Req. 3:\n    If the vehicle is moving\n    and the primary circuit cannot provide power steering\n    then the vehicle is moving without primary power steering.\n\n    Req. 4:\n    If the vehicle is moving without primary power steering\n    then the secondary circuit should handle power steering.\n\n    Req. 5:\n    If the secondary circuit is providing power steering\n    and the parking brake is not set\n    then the electric motor must be activated.\n */\n\n// #define _(...) /* nothing */\n//\n// #define VEH_MOVING_LIMIT 3\n//\n// #define TRUE 1\n// #define FALSE 0\n\nenum SENSOR_STATE\n{\n    WORKING,\n    NO_FLOW,\n    SHORT_CIRCUIT\n};\n\nstruct VEHICLE_INFO\n{\n    int wheelSpeed;\n    int parkingBrake;\n    int primLowFlow;\n    int primHighVoltage;\n    int secondCircHandlesStee;\n    int electricMotorAct;\n};\n\nenum SIGNAL\n{\n    PARKING_BRAKE_APPLIED,\n    PRIMARY_CIRCUIT_LOW_FLOW,\n    PRIMARY_CIRCUIT_HIGH_VOLTAGE,\n    WHEEL_BASED_SPEED,\n    SECONDARY_CIRCUIT_HANDLES_STEERING,\n    ELECTRIC_MOTOR_ACTIVATED,\n    NUM_SIGNALS\n};\n\n// ghost variables representing model_variables in requirements\n// note: these should all be booleans\n//@ ghost int model_vehicleIsMoving;\n//@ ghost int model_vehicleMovingWithoutPrimaryPowerSteering;\n//@ ghost int model_primaryCircuitProvidingPowerSteering;\n\nint state_PARKING_BRAKE_APPLIED;\nint state_PRIMARY_CIRCUIT_LOW_FLOW;\nint state_PRIMARY_CIRCUIT_HIGH_VOLTAGE;\nint state_WHEEL_BASED_SPEED;\nint state_SECONDARY_CIRCUIT_HANDLES_STEERING;\nint state_ELECTRIC_MOTOR_ACTIVATED;\n\n// int state[NUM_SIGNALS]; // Global state\n\n/*\n    Evaluates the state of the primary steering circuit sensors.\n */\n/*@\n  requires ((veh_info.primLowFlow == 1 && 3 >= veh_info.wheelSpeed) || (veh_info.primLowFlow == 1 && veh_info.wheelSpeed >= 4) || (veh_info.primHighVoltage == 1 && 3 >= veh_info.wheelSpeed) || (veh_info.primHighVoltage == 1 && veh_info.wheelSpeed >= 4) || (veh_info.primLowFlow != 1 && 3 >= veh_info.wheelSpeed) || (veh_info.primLowFlow != 1 && veh_info.wheelSpeed >= 4)) && veh_info.parkingBrake == state_PARKING_BRAKE_APPLIED && veh_info.primLowFlow == state_PRIMARY_CIRCUIT_LOW_FLOW && veh_info.primHighVoltage == state_PRIMARY_CIRCUIT_HIGH_VOLTAGE && veh_info.wheelSpeed == state_WHEEL_BASED_SPEED && veh_info.secondCircHandlesStee == state_SECONDARY_CIRCUIT_HANDLES_STEERING && veh_info.electricMotorAct == state_ELECTRIC_MOTOR_ACTIVATED;\n  ensures (\\result == 2 || (\\result == 1 && \\old(state_PRIMARY_CIRCUIT_HIGH_VOLTAGE) != 1) || (\\result == 0 && \\old(state_PRIMARY_CIRCUIT_LOW_FLOW) != 1 && \\old(state_PRIMARY_CIRCUIT_HIGH_VOLTAGE) != 1)) && \\old(veh_info).parkingBrake == state_PARKING_BRAKE_APPLIED && \\old(veh_info).wheelSpeed == state_WHEEL_BASED_SPEED && \\old(veh_info).secondCircHandlesStee == state_SECONDARY_CIRCUIT_HANDLES_STEERING && \\old(veh_info).electricMotorAct == state_ELECTRIC_MOTOR_ACTIVATED && \\old(veh_info).parkingBrake == \\old(state_PARKING_BRAKE_APPLIED) && \\old(veh_info).wheelSpeed == \\old(state_WHEEL_BASED_SPEED) && \\old(veh_info).secondCircHandlesStee == \\old(state_SECONDARY_CIRCUIT_HANDLES_STEERING) && \\old(veh_info).electricMotorAct == \\old(state_ELECTRIC_MOTOR_ACTIVATED) && \\old(model_vehicleIsMoving) == model_vehicleIsMoving && \\old(model_vehicleMovingWithoutPrimaryPowerSteering) == model_vehicleMovingWithoutPrimaryPowerSteering && \\old(model_primaryCircuitProvidingPowerSteering) == model_primaryCircuitProvidingPowerSteering && \\old(state_PRIMARY_CIRCUIT_LOW_FLOW) == state_PRIMARY_CIRCUIT_LOW_FLOW && \\old(state_PRIMARY_CIRCUIT_HIGH_VOLTAGE) == state_PRIMARY_CIRCUIT_HIGH_VOLTAGE;\n*/\nenum SENSOR_STATE eval_prim_sensor_state(struct VEHICLE_INFO veh_info);\n  // TODO: ADD CODE HERE\n\n```', 'gpt_output': '```C\nenum SENSOR_STATE eval_prim_sensor_state(struct VEHICLE_INFO veh_info) {\n    if ((veh_info.primLowFlow || veh_info.primHighVoltage) && veh_info.parkingBrake) {\n        return NO_FLOW;\n    } else {\n        if (veh_info.primLowFlow && veh_info.primHighVoltage) {\n            return WORKING;\n        } else {\n            return SHORT_CIRCUIT;\n        }\n    }\n}\n```', 'verified': False, 'verified_goals': '2 / 3', 'temperature': 0.8, 'info': 'initial prompt'}]